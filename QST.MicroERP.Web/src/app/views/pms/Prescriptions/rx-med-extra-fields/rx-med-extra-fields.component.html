<div class="container-fluid page height">
    <div class="d-flex page_box p-3 mt-2 header-sticky" position="sticky">
        <div fxLayout="row" fxLayoutAlign="space-between" fxFlex="100%">
            <div *ngIf="AddMode">Add Patient Visit Parameter
            </div>
            <div *ngIf="EditMode">Update Patient Visit Parameter
            </div>
            <div fxFlex="7%" >
                <button mat-icon-button fxLayoutAlign="end end" (click)="dialogRef.close()" style="color: white">
                    <mat-icon>close</mat-icon>
                </button>
            </div>
        </div>
    </div>
    <div class="page_content shadow p-3 position-relative">
        <form #RxMedicineFieldForm="ngForm">
            <Row>
                <div fxLayout="row" fxLayoutAlign="space-between">
                    <mat-form-field appearance="outline" fxFlex="49%" class="form-group">
                        <mat-label>Enter Field Name</mat-label>
                        <input maxlength="255" matInput class="form-control" name="name" #name="ngModel"
                            [(ngModel)]="selectedRxMedicineField.name" required maxlength="200" minlength="3" />
                    </mat-form-field>
                    <mat-form-field appearance="outline" style="width: 49%;">
                        <mat-label> Select Field Type</mat-label>
                        <mat-select required name="keyCode" matNativeControl #keyCode="ngModel"
                            [(ngModel)]="selectedRxMedicineField.keyCode">
                            <mat-option [value]="default">
                                --Please Select--</mat-option>
                            <mat-option *ngFor="let pt of fieldTypes" [value]=" pt.name">
                                {{ pt.name}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </Row>
            <div fxLayout="row" fxLayoutAlign="space-between" *ngIf="selectedRxMedicineField.keyCode=='Text Box'">
                 <mat-form-field appearance="outline" style="width: 100%;">
                   <mat-label> Select Input Type</mat-label>
                        <mat-select required name="description" matNativeControl #description="ngModel"
                            [(ngModel)]="selectedRxMedicineField.description">
                            <mat-option *ngFor="let pt of inputTypes" [value]=" pt.name">
                                {{ pt.name}}
                            </mat-option>
                        </mat-select>
                </mat-form-field>          
             </div>
            <div fxLayoutAlign="end end">
                <mat-checkbox name="isActive" [(ngModel)]="selectedRxMedicineField.isActive" checked>Is Active
                </mat-checkbox>
                <mat-checkbox name="isRequired" [(ngModel)]="selectedRxMedicineField.isRequired" checked>Is Required
                </mat-checkbox>
            </div>
            <form #valuesForm="ngForm" (keydown.enter)="$event.preventDefault()"
                *ngIf="selectedRxMedicineField.keyCode=='Drop Down' || selectedRxMedicineField.keyCode=='Radio Button'"
                style="margin-left: 30px;margin-right: 30px;">
                <c-card style="padding: 10px; margin-top: 20px;" class="mat-elevation-z8">
                    <p style="font-size:18px;  color: #04415e;margin-top: 10px;">Possible Values</p>
                    <Row>
                        <div fxLayout="row" fxFlex="100%" fxLayoutAlign="space-between">
                            <mat-form-field appearance="outline" fxFlex="93%">
                                <mat-label>Name</mat-label>
                                <input  maxlength="255" matInput #name="ngModel" required name="name"
                                    [(ngModel)]="selectedValues.name" />
                            </mat-form-field>
                            <button mat-icon-button mat-sm-button type="submit" style="color: rgb(97, 48, 48);"
                                fxFlex="7%" cTooltipPlacement="top" (click)="AddPossibleValueToList()">
                                <mat-icon>add</mat-icon>
                            </button>
                            <!-- <button mat-icon-button mat-sm-button color="primary" fxFlex="7%" cTooltip="Refresh"
                                cTooltipPlacement="top" (click)="RefreshDetail()">
                                <mat-icon>autorenew</mat-icon>
                            </button> -->
                        </div>
                    </Row>
                    <!-- <h5 style="font-size:20px;  color: #04415e;margin: 20px;"> Possible Value List</h5> -->
                    <c-card-body
                        style="padding: 10px;background-image: linear-gradient(to bottom, rgb(2, 33, 58), rgb(7, 95, 122));margin: 5px;border-radius: 10px;">
                        <div class="example-table-container">
                            <section class="example-container mat-elevation-z8" tabindex="0"
                                style="border-radius: 5px;">
                                <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
                                    <ng-container matColumnDef="Id">
                                        <th mat-header-cell *matHeaderCellDef> Sr No </th>
                                        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                                    </ng-container>
                                    <ng-container matColumnDef="name">
                                        <th mat-header-cell *matHeaderCellDef style="width:78% ;"> Name </th>
                                        <td mat-cell *matCellDef="let element" style="width:78% ;"> {{element.name}}
                                        </td>
                                    </ng-container>
                                    <ng-container matColumnDef="actions" stickyEnd>
                                        <th mat-header-cell *matHeaderCellDef>
                                            <div style="max-width: 100px; text-align: center;">Actions
                                            </div>
                                        </th>
                                        <td mat-cell *matCellDef="let row">
                                            <div style="max-width: 100px;text-align: center;">
                                                <button mat-icon-button mat-sm-button style="color:#1e293b ; "
                                                    (click)="edit(row)" cTooltip="Edit Value ">
                                                    <mat-icon>edit</mat-icon>
                                                </button>
                                                <button mat-icon-button mat-sm-button color="warn"
                                                    cTooltip="Delete Value " (click)="delete(row)">
                                                    <mat-icon>delete</mat-icon>
                                                </button>
                                            </div>
                                        </td>
                                    </ng-container>
                                    <tr mat-header-row *matHeaderRowDef="displayedColumns sticky: true"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;">
                                    </tr>
                                </table>
                            </section>
                        </div>
                    </c-card-body>
                </c-card>
            </form>
            <Row>
                <div fxLayoutAlign="end end">
                    <button mat-raised-button *ngIf="AddMode" style="background-color: rgb(3, 37, 68);color: white;"
                        (click)="SaveRxMedicineField()">Submit</button>
                    <button mat-raised-button *ngIf="EditMode" style="background-color: rgb(2, 35, 66);color: white;"
                        (click)="SaveRxMedicineField()">Update</button>
                    <div>
                        <button mat-icon-button mat-sm-button color="primary" cTooltip="Refresh" cTooltipPlacement="top"
                            (click)="Refresh()">
                            <mat-icon>autorenew</mat-icon>
                        </button>
                    </div>
                </div>
            </Row>
        </form>
    </div>
</div>